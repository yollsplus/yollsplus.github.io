---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const recentPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()).slice(0, 3);
---

<Layout title="Yolls Blog">
	<div class="prose prose-slate max-w-none font-mono">
		<h1 class="text-4xl font-bold mb-6 border-b-4 border-retro-accent-2 inline-block pr-8 pb-2">WELCOME_USER</h1>
		
		<p class="text-lg mb-8">
			正在加载 Yolls 的个人数据流...<br/>
			<span class="text-retro-accent-1">>>> 载入完成 (100%)</span>
		</p>

		<div class="p-6 border-2 border-retro-border bg-retro-bg mb-8 shadow-retro-sm">
			<h2 class="text-xl font-bold mb-4 flex items-center">
				<span class="w-3 h-3 bg-retro-accent-1 mr-2 animate-pulse"></span>
				最新日志
			</h2>
			<ul class="space-y-4">
				{recentPosts.map((post) => (
					<li class="flex items-center justify-between border-b border-gray-300 pb-2">
						<a href={`/blog/${post.slug}/`} class="hover:text-retro-accent-2 hover:underline decoration-2 underline-offset-4">
							{post.data.title}
						</a>
						<span class="text-xs text-gray-500 font-mono">
							{post.data.pubDate.toLocaleDateString()}
						</span>
					</li>
				))}
			</ul>
		</div>

		<p>
			这是一个极简主义、像素风的知识库。
			左侧导航索引所有数据。
		</p>
	</div>
</Layout>
